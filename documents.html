<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Documents - Lithium Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header Placeholder -->
        <div id="header-placeholder"></div>
        <!-- Hidden Subtitle for this page -->
        <p id="page-subtitle-main" style="display: none;">Manage Documents</p>

        <!-- Main Content Area -->
        <main id="main-content">
             <div id="errorMessage" class="alert alert-danger d-none mt-4" role="alert"></div> <!-- Added mt-4 -->
             <div id="successMessage" class="alert alert-success d-none mt-4" role="alert"></div> <!-- Added mt-4 -->

            <div class="card mb-4 mt-4"> <!-- Added mt-4 -->
                <div class="card-header">Select Facility</div>
                <div class="card-body">
                     <label for="facilitySelect" class="form-label">Select a facility to manage its documents:</label>
                     <select class="form-select" id="facilitySelect">
                         <option selected disabled value="">-- Select a Facility --</option>
                         <option value="ALL">-- All Facilities --</option> <!-- Added All Facilities Option -->
                         <!-- Facility options will be loaded here by JavaScript -->
                     </select>
                </div>
            </div>

            <!-- Document Management Section (Initially hidden/disabled) -->
            <div id="documentManagementSection" class="d-none">
                <div class="row">
                    <!-- Tree View Column -->
                    <div class="col-md-3 border-end" id="folderTreeViewContainer">
                        <h5>Folder Structure</h5>
                        <hr>
                        <div id="folderTreeView" style="max-height: 60vh; overflow-y: auto;">
                            <!-- Tree view will be populated by JS -->
                            <p class="text-muted small">Select a facility to view folders.</p>
                        </div>
                    </div>

                    <!-- Main Content Column -->
                    <div class="col-md-9" id="mainDocumentArea">
                        <h4 id="selectedFacilityName">Files for: </h4>
                        <hr>
                        <!-- Breadcrumb Navigation -->
                        <nav aria-label="breadcrumb" id="breadcrumbNav" class="mb-3" style="display: none;">
                            <ol class="breadcrumb" id="breadcrumbList">
                                <!-- Breadcrumbs will be populated by JS -->
                                <li class="breadcrumb-item"><a href="#" data-folder-id="root-placeholder"><i class="fas fa-home"></i></a></li>
                            </ol>
                        </nav>

                        <!-- File Explorer Card -->
                        <div class="card mb-3">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>Current Folder Contents</span>
                                <div class="btn-group" role="group" aria-label="File actions">
                                    <button type="button" class="btn btn-sm btn-outline-primary" id="newFolderButton" title="New Folder"><i class="fas fa-folder-plus"></i> New Folder</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="uploadFileButton" title="Upload File"><i class="fas fa-upload"></i> Upload File</button>
                                    <button type="button" class="btn btn-sm btn-outline-info" id="addLinkButton" title="Add Link"><i class="fas fa-link"></i> Add Link</button>
                                </div>
                            </div>
                            <div class="card-body p-0"> <!-- Remove padding for table -->
                                <!-- File Explorer View Area -->
                                <div id="fileExplorerView" class="table-responsive">
                                    <!-- Table or Grid will be populated by JS -->
                                    <p class="text-muted p-3" id="loadingMessage">Loading...</p>
                                    <p class="text-muted p-3 d-none" id="emptyFolderMessage">This folder is empty.</p>
                                </div>
                                <!-- TODO: Add Modals for Upload/Add Link/New Folder forms -->
                            </div>
                        </div>
                        <!-- End File Explorer Card -->
                    </div> <!-- End Main Content Column -->
                </div> <!-- End row -->
            </div>
            <!-- End Document Management Section -->
        </main> <!-- End Main Content Area -->

    </div> <!-- End dashboard-container -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Documents Page JS -->
    <script src="js/documents.js" data-page-script="true"></script> <!-- Link to new JS file -->
    <!-- Common JS (Loads Header, Handles Theme/Auth, SPA Routing) -->
    <script src="js/common.js"></script>

    <!-- Removed inline theme and auth scripts -->

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>
</body>
</html>